// Portfolio images data
const portfolioImages = [
    {
        src: 'images/portfolio/23590015l.jpg',
        alt: 'Madisyn Ritland',
        caption: 'Madisyn Ritland 3'
    },
    {
        src: 'images/portfolio/57570033ll.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss'
    },
    {
        src: 'images/portfolio/38030007fix.jpg',
        alt: 'Samantha Gradoville',
        caption: 'Samantha Gradoville 1'
    },
    {
        src: 'images/portfolio/_9A_0093lbwb.jpg',
        alt: 'Emily Grace Hime',
        caption: 'Emily Grace Hime 2'
    },
    {
        src: 'images/portfolio/02110026lbwb2.jpg',
        alt: 'Amelia Zadro',
        caption: 'Amelia Zadro'
    },
    {
        src: 'images/portfolio/48600034lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study 2'
    },
    {
        src: 'images/portfolio/03230035l.jpg',
        alt: 'Hyunji Shin',
        caption: 'Hyunji Shin'
    },
    {
        src: 'images/portfolio/03120030.jpg',
        alt: 'Hyunji Shin',
        caption: 'Hyunji Shin'
    },
    {
        src: 'images/portfolio/03230014.jpg',
        alt: 'Hyunji Shin',
        caption: 'Hyunji Shin'
    },
    {
        src: 'images/portfolio/23560024al.jpg',
        alt: 'Madisyn Ritland',
        caption: 'Madisyn Ritland 1'
    },
    {
        src: 'images/portfolio/23380020albw1.jpg',
        alt: 'Madisyn Ritland',
        caption: 'Madisyn Ritland 4'
    },
    {
        src: 'images/portfolio/23720028l1.jpg',
        alt: 'Pixie',
        caption: 'Pixie'
    },
    {
        src: 'images/portfolio/33890037l.jpg',
        alt: 'Alana Zimmer',
        caption: 'Alana Zimmer'
    },
    {
        src: 'images/portfolio/33970009l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study 5'
    },
    {
        src: 'images/portfolio/38050025.jpg',
        alt: 'Samantha Gradoville',
        caption: 'Samantha Gradoville 2'
    },
    {
        src: 'images/portfolio/38320004lf.jpg',
        alt: 'Samantha Gradoville',
        caption: 'Samantha Gradoville 3'
    },
    {
        src: 'images/portfolio/_30_0033l.jpg',
        alt: 'Emily Grace Hime',
        caption: 'Emily Grace Hime 1'
    },
    {
        src: 'images/portfolio/30630018lbwb.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk 1'
    },
    {
        src: 'images/portfolio/30570015lbwb2c1.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk 3'
    },
    {
        src: 'images/portfolio/68100004.jpg',
        alt: 'Xiao Wen Ju',
        caption: 'Xiao Wen Ju 1'
    },

    {
        src: 'images/portfolio/000077960007.jpg',
        alt: 'Jaclyn Breen',
        caption: 'Jaclyn Breen'
    },
    {
        src: 'images/portfolio/000078000020lfix.jpg',
        alt: 'Jaclyn Breen',
        caption: 'Jaclyn Breen'
    },
    {
        src: 'images/portfolio/F1040083.JPG',
        alt: 'Va Bien Lingerie',
        caption: 'Va Bien Lingerie'
    },
    {
        src: 'images/portfolio/F1040208.jpg',
        alt: 'Va Bien Lingerie',
        caption: 'Va Bien Lingerie'
    },
    {
        src: 'images/portfolio/00100011.jpg',
        alt: 'Modern Weekly China',
        caption: 'Modern Weekly China'
    },
    {
        src: 'images/portfolio/00030030.jpg',
        alt: 'Modern Weekly China',
        caption: 'Modern Weekly China'
    },
    {
        src: 'images/portfolio/00020025.jpg',
        alt: 'Modern Weekly China',
        caption: 'Modern Weekly China'
    },
    {
        src: 'images/portfolio/10090015.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite'
    },
    {
        src: 'images/portfolio/10050034.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite'
    },
    {
        src: 'images/portfolio/03080006.jpg',
        alt: 'Anna Mila',
        caption: 'Anna Mila'
    },
    {
        src: 'images/portfolio/000038220005lbwb.jpg',
        alt: 'Sonia Ammar',
        caption: 'Sonia Ammar'
    },
    {
        src: 'images/portfolio/000005040018l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study 7'
    },
    {
        src: 'images/portfolio/000047940020lbw.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study 4'
    },
    {
        src: 'images/portfolio/000067440033lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study 2'
    },
    {
        src: 'images/portfolio/01190030lbwb1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study 9'
    },
    {
        src: 'images/portfolio/F1000033l1.jpg',
        alt: 'Lindsey Wixson',
        caption: 'Lindsey Wixson 3'
    },
    {
        src: 'images/portfolio/25310010l1bw1.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk 2'
    },
    {
        src: 'images/portfolio/01150022.jpg',
        alt: 'Ashley Smith and Charlie Himmelstein',
        caption: 'Ashley Smith and Charlie Himmelstein 1'
    },
    {
        src: 'images/portfolio/01050013.jpg',
        alt: 'Ashley Smith and Charlie Himmelstein',
        caption: 'Ashley Smith and Charlie Himmelstein 2'
    },
    {
        src: 'images/portfolio/000074850035lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study 1'
    },
    {
        src: 'images/portfolio/68050012.jpg',
        alt: 'Charlotte Free',
        caption: 'Charlotte Free 2'
    },
    {
        src: 'images/portfolio/91180008.jpg',
        alt: 'The Last Magazine Portrait',
        caption: 'The Last Magazine Portrait'
    },
];


// Track lightbox state
let currentLightboxIndex = 0;

document.addEventListener('DOMContentLoaded', function() {
    const portfolioGrid = document.getElementById('portfolio-grid');
    
    if (portfolioGrid) {
        // Load portfolio images
        loadPortfolioImages();
        
        // Setup lightbox
        initLightbox();
    }
    
    // Set current year in footer
    const currentYearSpan = document.getElementById('current-year');
    if (currentYearSpan) {
        currentYearSpan.textContent = new Date().getFullYear();
    }

    // Mobile menu toggle
    const mobileMenu = document.getElementById('mobile-menu');
    const nav = document.querySelector('nav');
    
    if (mobileMenu) {
        mobileMenu.addEventListener('click', function() {
            nav.classList.toggle('active');
            mobileMenu.classList.toggle('active');
        });
    }
});

/**
 * Loads portfolio images into the grid with automatic orientation detection
 */
function loadPortfolioImages() {
    const portfolioGrid = document.getElementById('portfolio-grid');
    
    // Clear any existing items
    portfolioGrid.innerHTML = '';
    
    // Track loaded images for lightbox functionality
    let loadedImages = 0;
    const totalImages = portfolioImages.length;
    
    // Add images to the grid
    portfolioImages.forEach((image, index) => {
        // Create portfolio item container first
        const item = document.createElement('div');
        item.className = 'portfolio-item'; // Base class without orientation yet
        item.dataset.index = index;
        
        // Create image element
        const img = document.createElement('img');
        img.src = image.src;
        img.alt = image.alt;
        
        // Add load event to determine orientation
        img.onload = function() {
            // Determine orientation based on aspect ratio
            const ratio = this.naturalWidth / this.naturalHeight;
            
            if (ratio > 1.2) {
                item.classList.add('horizontal');
            } else if (ratio < 0.8) {
                item.classList.add('vertical');
            } else {
                item.classList.add('square');
            }
            
            // Track when all images are loaded
            loadedImages++;
            if (loadedImages === totalImages) {
                console.log('All images loaded with orientation detection');
            }
        };
        
        // Add error handling
        img.onerror = function() {
            console.error(`Failed to load image: ${image.src}`);
            item.classList.add('vertical'); // Default to vertical on error
            
            // Still track loading
            loadedImages++;
        };
        
        // Create caption element
        const caption = document.createElement('div');
        caption.className = 'caption';
        caption.textContent = image.caption;
        // COMMENT OUT BOTTOM TWO WHEN DONE WITH CAPTIONS
        
        // Add click event for lightbox
        item.addEventListener('click', function() {
            openLightbox(index);
        });
        
        // Append elements to item
        item.appendChild(img);
        item.appendChild(caption);
        
        // Add to grid
        portfolioGrid.appendChild(item);
    });
}

/**
 * Initializes the lightbox functionality
 */
function initLightbox() {
    const lightbox = document.getElementById('lightbox');
    const closeBtn = document.querySelector('.close-lightbox');
    const prevBtn = document.querySelector('.lightbox-prev');
    const nextBtn = document.querySelector('.lightbox-next');
    
    // Close lightbox when clicked outside of content
    if (lightbox) {
        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                closeLightbox();
            }
        });
    }
    
    // Close button click
    if (closeBtn) {
        closeBtn.addEventListener('click', closeLightbox);
    }
    
    // Previous button click
    if (prevBtn) {
        prevBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox('prev');
        });
    }
    
    // Next button click
    if (nextBtn) {
        nextBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox('next');
        });
    }
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (!lightbox || !lightbox.classList.contains('active')) return;
        
        if (e.key === 'Escape') {
            closeLightbox();
        } else if (e.key === 'ArrowLeft') {
            navigateLightbox('prev');
        } else if (e.key === 'ArrowRight') {
            navigateLightbox('next');
        }
    });
}

/**
 * Opens the lightbox with the specified image
 */
function openLightbox(index) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxCaption = document.getElementById('lightbox-caption');
    
    if (!lightbox || !lightboxImg || !lightboxCaption) return;
    
    // Set current index
    currentLightboxIndex = index;
    
    // Get image data
    const image = portfolioImages[index];
    
    // Set image and caption
    lightboxImg.src = image.src;
    lightboxImg.alt = image.alt;
    lightboxCaption.textContent = image.caption;
    
    // Show lightbox
    lightbox.classList.add('active');
    
    // Prevent body scrolling
    document.body.style.overflow = 'hidden';
}

/**
 * Closes the lightbox
 */
function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    
    if (!lightbox) return;
    
    // Hide lightbox
    lightbox.classList.remove('active');
    
    // Allow body scrolling
    document.body.style.overflow = '';
}

/**
 * Navigates to the previous or next image in the lightbox
 */
function navigateLightbox(direction) {
    // Calculate new index
    let newIndex;
    
    if (direction === 'prev') {
        newIndex = (currentLightboxIndex - 1 + portfolioImages.length) % portfolioImages.length;
    } else {
        newIndex = (currentLightboxIndex + 1) % portfolioImages.length;
    }
    
    // Open lightbox with new index
    openLightbox(newIndex);
}