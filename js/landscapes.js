// Landscape images data
const portfolioImages = [
    { src: "images/landscapes/all/98040025.JPG", alt: "Landscape Photography", caption: "93. Landscape Photography" },
    { src: "images/landscapes/all/98070022.JPG", alt: "Landscape Photography", caption: "94. Landscape Photography" },
    { src: "images/landscapes/all/R1-08244-0002.jpg", alt: "Landscape Photography", caption: "128. Landscape Photography" },
    { src: "images/landscapes/all/R1-08246-023A.jpg", alt: "Landscape Photography", caption: "131. Landscape Photography" },

    { src: "images/landscapes/all/90450012l.jpg", alt: "Landscape Photography", caption: "83. Landscape Photography" },
    { src: "images/landscapes/all/F1020013l.jpg", alt: "Landscape Photography", caption: "117. Landscape Photography" },
    { src: "images/landscapes/all/65430011l.jpg", alt: "Landscape Photography", caption: "54. Landscape Photography" },
    { src: "images/landscapes/all/23150028l1.jpg", alt: "Landscape Photography", caption: "42. Landscape Photography" },

    { src: "images/landscapes/all/31150008l.jpg", alt: "Landscape Photography", caption: "43. Landscape Photography" },
    { src: "images/landscapes/all/31150013l.jpg", alt: "Landscape Photography", caption: "44. Landscape Photography" },
    { src: "images/landscapes/all/97890038al.jpg", alt: "Landscape Photography", caption: "89. Landscape Photography" },

    { src: "images/landscapes/all/65440021l.jpg", alt: "Landscape Photography", caption: "64. Landscape Photography" },
    { src: "images/landscapes/all/000005050021l.jpg", alt: "Landscape Photography", caption: "1. Landscape Photography" },
    { src: "images/landscapes/all/70990004l1.jpg", alt: "Landscape Photography", caption: "73. Landscape Photography" },

    { src: "images/landscapes/all/77750009.JPG", alt: "Landscape Photography", caption: "79. Landscape Photography" },
    { src: "images/landscapes/all/90270002.JPG", alt: "Landscape Photography", caption: "82. Landscape Photography" },
    { src: "images/landscapes/all/000013050031l.jpg", alt: "Landscape Photography", caption: "6. Landscape Photography" },

    { src: "images/landscapes/all/16810025con.jpg", alt: "Landscape Photography", caption: "25. Landscape Photography" },
    { src: "images/landscapes/all/16780020conal.jpg", alt: "Landscape Photography", caption: "22. Landscape Photography" },
    { src: "images/landscapes/all/16780010con.jpg", alt: "Landscape Photography", caption: "21. Landscape Photography" },

    { src: "images/landscapes/all/20570010l.jpeg", alt: "Landscape Photography", caption: "29. Landscape Photography" },
    { src: "images/landscapes/all/65430018l1.jpg", alt: "Landscape Photography", caption: "55. Landscape Photography" },
    { src: "images/landscapes/all/72410018.JPG", alt: "Landscape Photography", caption: "76. Landscape Photography" },

    { src: "images/landscapes/all/65430009.JPG", alt: "Landscape Photography", caption: "53. Landscape Photography" },
    { src: "images/landscapes/all/F1000023l1.jpg", alt: "Landscape Photography", caption: "106. Landscape Photography" },
    { src: "images/landscapes/all/000012630002l.jpg", alt: "Landscape Photography", caption: "4. Landscape Photography" },

    { src: "images/landscapes/all/33330016.JPG", alt: "Landscape Photography", caption: "45. Landscape Photography" },
    { src: "images/landscapes/all/20520028l.jpeg", alt: "Landscape Photography", caption: "27. Landscape Photography" },
    { src: "images/landscapes/all/F1010001l.jpg", alt: "Landscape Photography", caption: "107. Landscape Photography" },
    { src: "images/landscapes/all/R1-08245-004A.jpg", alt: "Landscape Photography", caption: "129. Landscape Photography" },
    { src: "images/landscapes/all/23150024lf1.jpg", alt: "Landscape Photography", caption: "40. Landscape Photography" },





    { src: "images/landscapes/all/F1010002l.jpg", alt: "Landscape Photography", caption: "108. Landscape Photography" },
    { src: "images/landscapes/all/F1010003l__281_29.jpg", alt: "Landscape Photography", caption: "109. Landscape Photography" },

    { src: "images/landscapes/all/F1010008.JPG", alt: "Landscape Photography", caption: "110. Landscape Photography" },
    { src: "images/landscapes/all/5877-27al.jpg", alt: "Landscape Photography", caption: "49. Landscape Photography" },
    { src: "images/landscapes/all/65440019l.jpg", alt: "Landscape Photography", caption: "62. Landscape Photography" },

    
    { src: "images/landscapes/all/05010029.JPG", alt: "Landscape Photography", caption: "17. Landscape Photography" },
    { src: "images/landscapes/all/R1-08253-018A.jpg", alt: "Landscape Photography", caption: "139. Landscape Photography" },
    { src: "images/landscapes/all/70990028l1.jpg", alt: "Landscape Photography", caption: "74. Landscape Photography" },
    { src: "images/landscapes/all/49500048_559883431106539_5663161701172772864_n.jpg", alt: "Landscape Photography", caption: "46. Landscape Photography" },
    { src: "images/landscapes/all/va__2810_29.JPG", alt: "Landscape Photography", caption: "142. Landscape Photography" },
    { src: "images/landscapes/all/F1000019llbw.jpg", alt: "Landscape Photography", caption: "105. Landscape Photography" },
    { src: "images/landscapes/all/FH000001.jpg", alt: "Landscape Photography", caption: "124. Landscape Photography" },
    { src: "images/landscapes/all/R1-08252-032Al.jpg", alt: "Landscape Photography", caption: "137. Landscape Photography" },
    { src: "images/landscapes/all/R1-08253-000A_0001l.jpg", alt: "Landscape Photography", caption: "138. Landscape Photography" },
    { src: "images/landscapes/all/21330038l.jpeg", alt: "Landscape Photography", caption: "36. Landscape Photography" },
    { src: "images/landscapes/all/F1000011.JPG", alt: "Landscape Photography", caption: "100. Landscape Photography" },
    { src: "images/landscapes/all/000005050031.jpg", alt: "Landscape Photography", caption: "2. Landscape Photography" },
    { src: "images/landscapes/all/F1000005l.jpg", alt: "Landscape Photography", caption: "98. Landscape Photography" },
    { src: "images/landscapes/all/97410002l.jpg", alt: "Landscape Photography", caption: "84. Landscape Photography" },
    { src: "images/landscapes/all/05010021.JPG", alt: "Landscape Photography", caption: "15. Landscape Photography" },
    { src: "images/landscapes/all/65440020l.jpg", alt: "Landscape Photography", caption: "63. Landscape Photography" },
    { src: "images/landscapes/all/000013050012l.jpg", alt: "Landscape Photography", caption: "5. Landscape Photography" },
    { src: "images/landscapes/all/F1010034.JPG", alt: "Landscape Photography", caption: "116. Landscape Photography" },
    { src: "images/landscapes/all/000013050032l1.jpg", alt: "Landscape Photography", caption: "7. Landscape Photography" },
    { src: "images/landscapes/all/000012610004.jpg", alt: "Landscape Photography", caption: "3. Landscape Photography" },
    { src: "images/landscapes/all/000013050033.jpg", alt: "Landscape Photography", caption: "8. Landscape Photography" },
    { src: "images/landscapes/all/000013160032l.jpg", alt: "Landscape Photography", caption: "9. Landscape Photography" },
    { src: "images/landscapes/all/000019070001l.jpg", alt: "Landscape Photography", caption: "10. Landscape Photography" },
    { src: "images/landscapes/all/00020012.JPG", alt: "Landscape Photography", caption: "11. Landscape Photography" },
    { src: "images/landscapes/all/00040024.JPG", alt: "Landscape Photography", caption: "12. Landscape Photography" },
    { src: "images/landscapes/all/00830016albw.jpg", alt: "Landscape Photography", caption: "13. Landscape Photography" },
    { src: "images/landscapes/all/03050009.JPG", alt: "Landscape Photography", caption: "14. Landscape Photography" },
    { src: "images/landscapes/all/05010023.JPG", alt: "Landscape Photography", caption: "16. Landscape Photography" },
    { src: "images/landscapes/all/05010031.JPG", alt: "Landscape Photography", caption: "18. Landscape Photography" },
    { src: "images/landscapes/all/13810001l.jpg", alt: "Landscape Photography", caption: "19. Landscape Photography" },
    { src: "images/landscapes/all/13810003l.jpg", alt: "Landscape Photography", caption: "20. Landscape Photography" },
    { src: "images/landscapes/all/16810006al.jpg", alt: "Landscape Photography", caption: "24. Landscape Photography" },
    { src: "images/landscapes/all/20080008al.jpeg", alt: "Landscape Photography", caption: "26. Landscape Photography" },
    { src: "images/landscapes/all/20520035.JPG", alt: "Landscape Photography", caption: "28. Landscape Photography" },
    { src: "images/landscapes/all/20800024lc2.jpeg", alt: "Landscape Photography", caption: "30. Landscape Photography" },
    { src: "images/landscapes/all/21220008l.jpeg", alt: "Landscape Photography", caption: "31. Landscape Photography" },
    { src: "images/landscapes/all/21220015.jpeg", alt: "Landscape Photography", caption: "32. Landscape Photography" },
    { src: "images/landscapes/all/21220023.jpeg", alt: "Landscape Photography", caption: "33. Landscape Photography" },
    { src: "images/landscapes/all/21330002.jpeg", alt: "Landscape Photography", caption: "34. Landscape Photography" },
    { src: "images/landscapes/all/21330035l2.jpg", alt: "Landscape Photography", caption: "35. Landscape Photography" },
    { src: "images/landscapes/all/21340002l.jpeg", alt: "Landscape Photography", caption: "37. Landscape Photography" },
    { src: "images/landscapes/all/22240021l1.jpg", alt: "Landscape Photography", caption: "39. Landscape Photography" },
    { src: "images/landscapes/all/23150027l.jpg", alt: "Landscape Photography", caption: "41. Landscape Photography" },
    { src: "images/landscapes/all/52220009l.jpg", alt: "Landscape Photography", caption: "47. Landscape Photography" },
    { src: "images/landscapes/all/56610010.JPG", alt: "Landscape Photography", caption: "48. Landscape Photography" },
    { src: "images/landscapes/all/61890016.JPG", alt: "Landscape Photography", caption: "50. Landscape Photography" },
    { src: "images/landscapes/all/61890033.JPG", alt: "Landscape Photography", caption: "51. Landscape Photography" },
    { src: "images/landscapes/all/65300006.JPG", alt: "Landscape Photography", caption: "52. Landscape Photography" },
    { src: "images/landscapes/all/65430020l.jpg", alt: "Landscape Photography", caption: "57. Landscape Photography" },
    { src: "images/landscapes/all/65430030l.jpg", alt: "Landscape Photography", caption: "58. Landscape Photography" },
    { src: "images/landscapes/all/65440015.JPG", alt: "Landscape Photography", caption: "59. Landscape Photography" },
    { src: "images/landscapes/all/65440017l.jpg", alt: "Landscape Photography", caption: "60. Landscape Photography" },
    { src: "images/landscapes/all/65440018l.jpg", alt: "Landscape Photography", caption: "61. Landscape Photography" },
    { src: "images/landscapes/all/65440024l.jpg", alt: "Landscape Photography", caption: "65. Landscape Photography" },
    { src: "images/landscapes/all/65440028.JPG", alt: "Landscape Photography", caption: "66. Landscape Photography" },
    { src: "images/landscapes/all/65440029l.jpg", alt: "Landscape Photography", caption: "67. Landscape Photography" },
    { src: "images/landscapes/all/65840001.JPG", alt: "Landscape Photography", caption: "68. Landscape Photography" },
    { src: "images/landscapes/all/69480032.JPG", alt: "Landscape Photography", caption: "69. Landscape Photography" },
    { src: "images/landscapes/all/70020002.JPG", alt: "Landscape Photography", caption: "70. Landscape Photography" },
    { src: "images/landscapes/all/70020010lbwia.jpg", alt: "Landscape Photography", caption: "71. Landscape Photography" },
    { src: "images/landscapes/all/70980006l.jpg", alt: "Landscape Photography", caption: "72. Landscape Photography" },
    { src: "images/landscapes/all/71690009l.jpg", alt: "Landscape Photography", caption: "75. Landscape Photography" },
    { src: "images/landscapes/all/72410019.JPG", alt: "Landscape Photography", caption: "77. Landscape Photography" },
    { src: "images/landscapes/all/74550008.JPG", alt: "Landscape Photography", caption: "78. Landscape Photography" },
    { src: "images/landscapes/all/83690011.JPG", alt: "Landscape Photography", caption: "80. Landscape Photography" },
    { src: "images/landscapes/all/83720034al2.jpg", alt: "Landscape Photography", caption: "81. Landscape Photography" },
    { src: "images/landscapes/all/97450001l.jpg", alt: "Landscape Photography", caption: "85. Landscape Photography" },
    { src: "images/landscapes/all/97460017.JPG", alt: "Landscape Photography", caption: "86. Landscape Photography" },
    { src: "images/landscapes/all/97470001.JPG", alt: "Landscape Photography", caption: "87. Landscape Photography" },
    { src: "images/landscapes/all/97470015lf.jpg", alt: "Landscape Photography", caption: "88. Landscape Photography" },
    { src: "images/landscapes/all/97930003cfl.jpg", alt: "Landscape Photography", caption: "90. Landscape Photography" },
    { src: "images/landscapes/all/97950023l.jpg", alt: "Landscape Photography", caption: "91. Landscape Photography" },
    { src: "images/landscapes/all/98020012.JPG", alt: "Landscape Photography", caption: "92. Landscape Photography" },
    { src: "images/landscapes/all/98070028l.jpg", alt: "Landscape Photography", caption: "95. Landscape Photography" },
    { src: "images/landscapes/all/98100025l2.jpg", alt: "Landscape Photography", caption: "96. Landscape Photography" },
    { src: "images/landscapes/all/e__283_29.JPG", alt: "Landscape Photography", caption: "97. Landscape Photography" },
    { src: "images/landscapes/all/F1000010l.jpg", alt: "Landscape Photography", caption: "99. Landscape Photography" },
    { src: "images/landscapes/all/F1000011l.jpg", alt: "Landscape Photography", caption: "101. Landscape Photography" },
    { src: "images/landscapes/all/F1000013.JPG", alt: "Landscape Photography", caption: "102. Landscape Photography" },
    { src: "images/landscapes/all/F1000013l1.jpg", alt: "Landscape Photography", caption: "103. Landscape Photography" },
    { src: "images/landscapes/all/F1000018.JPG", alt: "Landscape Photography", caption: "104. Landscape Photography" },
    { src: "images/landscapes/all/F1010013.JPG", alt: "Landscape Photography", caption: "111. Landscape Photography" },
    { src: "images/landscapes/all/F1010014l.jpg", alt: "Landscape Photography", caption: "112. Landscape Photography" },
    { src: "images/landscapes/all/F1010015l1.jpg", alt: "Landscape Photography", caption: "113. Landscape Photography" },
    { src: "images/landscapes/all/F1010028.JPG", alt: "Landscape Photography", caption: "114. Landscape Photography" },
    { src: "images/landscapes/all/F1010029.JPG", alt: "Landscape Photography", caption: "115. Landscape Photography" },
    { src: "images/landscapes/all/F1030017.JPG", alt: "Landscape Photography", caption: "118. Landscape Photography" },
    { src: "images/landscapes/all/F1030028.JPG", alt: "Landscape Photography", caption: "119. Landscape Photography" },
    { src: "images/landscapes/all/F1030029.JPG", alt: "Landscape Photography", caption: "120. Landscape Photography" },
    { src: "images/landscapes/all/F1040003l1.jpg", alt: "Landscape Photography", caption: "121. Landscape Photography" },
    { src: "images/landscapes/all/F1040023l.jpg", alt: "Landscape Photography", caption: "122. Landscape Photography" },
    { src: "images/landscapes/all/F1040024.JPG", alt: "Landscape Photography", caption: "123. Landscape Photography" },
    { src: "images/landscapes/all/R002-002al2fix.jpg", alt: "Landscape Photography", caption: "125. Landscape Photography" },
    { src: "images/landscapes/all/R1-08241-035A.jpg", alt: "Landscape Photography", caption: "127. Landscape Photography" },
    { src: "images/landscapes/all/R1-08246-013A.jpg", alt: "Landscape Photography", caption: "130. Landscape Photography" },
    { src: "images/landscapes/all/R1-08246-028A.jpg", alt: "Landscape Photography", caption: "132. Landscape Photography" },
    { src: "images/landscapes/all/R1-08247-0031l.jpg", alt: "Landscape Photography", caption: "135. Landscape Photography" },
    { src: "images/landscapes/all/R1-08252-001A.jpg", alt: "Landscape Photography", caption: "136. Landscape Photography" },
    { src: "images/landscapes/all/R1-08254-0035l.jpg", alt: "Landscape Photography", caption: "141. Landscape Photography" },
];

// Track lightbox state
let currentLightboxIndex = 0;

document.addEventListener('DOMContentLoaded', function() {
    const portfolioGrid = document.getElementById('portfolio-grid');
    
    if (portfolioGrid) {
        // Load portfolio images
        loadPortfolioImages();
        
        // Setup lightbox
        initLightbox();
    }
    
    // Set current year in footer
    const currentYearSpan = document.getElementById('current-year');
    if (currentYearSpan) {
        currentYearSpan.textContent = new Date().getFullYear();
    }

    // Mobile menu toggle
    const mobileMenu = document.getElementById('mobile-menu');
    const nav = document.querySelector('nav');
    
    if (mobileMenu) {
        mobileMenu.addEventListener('click', function() {
            nav.classList.toggle('active');
            mobileMenu.classList.toggle('active');
        });
    }
});

/**
 * Loads portfolio images into the grid with automatic orientation detection
 */
function loadPortfolioImages() {
    const portfolioGrid = document.getElementById('portfolio-grid');
    
    // Clear any existing items
    portfolioGrid.innerHTML = '';
    
    // Track loaded images for lightbox functionality
    let loadedImages = 0;
    const totalImages = portfolioImages.length;
    
    // Add images to the grid
    portfolioImages.forEach((image, index) => {
        // Create portfolio item container first
        const item = document.createElement('div');
        item.className = 'portfolio-item'; // Base class without orientation yet
        item.dataset.index = index;
        
        // Create image element
        const img = document.createElement('img');
        img.src = image.src;
        img.alt = image.alt;
        
        // Add load event to determine orientation
        img.onload = function() {
            // Determine orientation based on aspect ratio
            const ratio = this.naturalWidth / this.naturalHeight;
            
            if (ratio > 1.2) {
                item.classList.add('horizontal');
            } else if (ratio < 0.8) {
                item.classList.add('vertical');
            } else {
                item.classList.add('square');
            }
            
            // Track when all images are loaded
            loadedImages++;
            if (loadedImages === totalImages) {
                console.log('All images loaded with orientation detection');
            }
        };
        
        // Add error handling
        img.onerror = function() {
            console.error(`Failed to load image: ${image.src}`);
            item.classList.add('vertical'); // Default to vertical on error
            
            // Still track loading
            loadedImages++;
        };
        
        // Create caption element
        const caption = document.createElement('div');
        caption.className = 'caption';
        caption.textContent = image.caption;
        
        // Add click event for lightbox
        item.addEventListener('click', function() {
            openLightbox(index);
        });
        
        // Append elements to item
        item.appendChild(img);
        item.appendChild(caption);
        
        // Add to grid
        portfolioGrid.appendChild(item);
    });
}

/**
 * Initializes the lightbox functionality
 */
function initLightbox() {
    const lightbox = document.getElementById('lightbox');
    const closeBtn = document.querySelector('.close-lightbox');
    const prevBtn = document.querySelector('.lightbox-prev');
    const nextBtn = document.querySelector('.lightbox-next');
    
    // Close lightbox when clicked outside of content
    if (lightbox) {
        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                closeLightbox();
            }
        });
    }
    
    // Close button click
    if (closeBtn) {
        closeBtn.addEventListener('click', closeLightbox);
    }
    
    // Previous button click
    if (prevBtn) {
        prevBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox('prev');
        });
    }
    
    // Next button click
    if (nextBtn) {
        nextBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox('next');
        });
    }
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (!lightbox || !lightbox.classList.contains('active')) return;
        
        if (e.key === 'Escape') {
            closeLightbox();
        } else if (e.key === 'ArrowLeft') {
            navigateLightbox('prev');
        } else if (e.key === 'ArrowRight') {
            navigateLightbox('next');
        }
    });
}

/**
 * Opens the lightbox with the specified image
 */
function openLightbox(index) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxCaption = document.getElementById('lightbox-caption');
    
    if (!lightbox || !lightboxImg || !lightboxCaption) return;
    
    // Set current index
    currentLightboxIndex = index;
    
    // Get image data
    const image = portfolioImages[index];
    
    // Set image and caption
    lightboxImg.src = image.src;
    lightboxImg.alt = image.alt;
    lightboxCaption.textContent = image.caption;
    
    // Show lightbox
    lightbox.classList.add('active');
    
    // Prevent body scrolling
    document.body.style.overflow = 'hidden';
}

/**
 * Closes the lightbox
 */
function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    
    if (!lightbox) return;
    
    // Hide lightbox
    lightbox.classList.remove('active');
    
    // Allow body scrolling
    document.body.style.overflow = '';
}

/**
 * Navigates to the previous or next image in the lightbox
 */
function navigateLightbox(direction) {
    // Calculate new index
    let newIndex;
    
    if (direction === 'prev') {
        newIndex = (currentLightboxIndex - 1 + portfolioImages.length) % portfolioImages.length;
    } else {
        newIndex = (currentLightboxIndex + 1) % portfolioImages.length;
    }
    
    // Open lightbox with new index
    openLightbox(newIndex);
}