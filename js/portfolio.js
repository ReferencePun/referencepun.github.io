// Portfolio images data
const portfolioImages = [
    {
        src: 'images/portfolio/__8_0169l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/_30_0033l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/_9A_0093lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000005040018l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000012030031ls.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000012580027l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000012590007l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000012630008l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000012640029l1s.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000012700033l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000012820003lfix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000013180028l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000019120016l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000019780003lfix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000019780027l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000019820034lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000038160005l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000038210017l2bwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000038220005lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000047940020lbw.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000067350030l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000067440033lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000074850035lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000077960007.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000078000020lfix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000092660033lb2fhp.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000092690032l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000092700032lb1f.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/000092730031lbw3.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/00020025.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/00030030.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/00100011.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/01_2BIssue_2B01_2BTransition.jpg',
        alt: 'Transition Issue 01',
        caption: 'Transition Issue 01'
    },
    {
        src: 'images/portfolio/01050013.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/01060012l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/01070007.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/01080027l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/01150022.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/01190030lbwb1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/01230028.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/016_21l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/02110026lbwb2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/03000015.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/03020022lfix2.jpg',
        alt: 'Portrait Study',
        caption: 'Portrait Study'
    },
    {
        src: 'images/portfolio/03060025.jpg',
        alt: 'Portrait Study',
        caption: 'Portrait Study'
    },
    {
        src: 'images/portfolio/03080006.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/03120030.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/03230014.jpg',
        alt: 'Portrait Study',
        caption: 'Portrait Study'
    },
    {
        src: 'images/portfolio/03230035l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/04730018alalconbwcBigF.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/04730026lf.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/10000035.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/10050034.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/10080016.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/10090015.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/10090017.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/10090019lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/10100023.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/10110030.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/16630027.jpg',
        alt: 'Bekim Trenova and Nina De Raadt',
        caption: 'Bekim Trenova and Nina De Raadt'
    },
    {
        src: 'images/portfolio/16660003.jpg',
        alt: 'Bekim Trenova and Nina De Raadt',
        caption: 'Bekim Trenova and Nina De Raadt'
    },
    {
        src: 'images/portfolio/16660004.jpg',
        alt: 'Bekim Trenova and Nina De Raadt',
        caption: 'Bekim Trenova and Nina De Raadt'
    },
    {
        src: 'images/portfolio/16670038.jpg',
        alt: 'Bekim Trenova and Nina De Raadt',
        caption: 'Bekim Trenova and Nina De Raadt'
    },
    {
        src: 'images/portfolio/16920020l0b.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/20050013l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/20060012.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/20060031.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/20070007.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/20070017l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/2038_0l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/20850031l2fix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/21210015.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/22360003lc.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/23380020albw1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/23560024al.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/23590015l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/23640009l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/23720028l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/24390017lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/24410008l7.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/24410011lbwifix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/24540001l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/24540015l6.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/25310010l1bw1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/25430034l1bwNew1fix.jpg',
        alt: 'Ela Hosk',
        caption: 'Ela Hosk'
    },
    {
        src: 'images/portfolio/25430035lbwNew3.jpg',
        alt: 'Ela Hosk',
        caption: 'Ela Hosk'
    },
    {
        src: 'images/portfolio/25520024lbwb2fix.jpg',
        alt: 'Ela Hosk',
        caption: 'Ela Hosk'
    },
    {
        src: 'images/portfolio/30190033lExposure.jpg',
        alt: 'Ela Hosk',
        caption: 'Ela Hosk'
    },
    {
        src: 'images/portfolio/30410027lbwb.jpg',
        alt: 'Ela Hosk',
        caption: 'Ela Hosk'
    },
    {
        src: 'images/portfolio/30560009l2f.jpg',
        alt: 'Ela Hosk',
        caption: 'Ela Hosk'
    },
    {
        src: 'images/portfolio/30570015lbwb2c1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/30630018lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/33890037l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/33970009l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/33980014l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/33980038l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/36570032l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/36590018l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/36830003l2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/38030007fix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/38050025.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/38320004lf.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/40960034l1bwbfix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/42740021lbw2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/42740023l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/42810013l13.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/47260028l2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/47370037l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/47420001l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/48020005l2a.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/48020013lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/48600034lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/50810020.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/52970025.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/53010015l0lb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/53020004.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/56740002fixcon.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/56740007.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/56740013fix0l2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/57570033ll.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/60370019l4.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/60410006.JPG',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/61770013.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/61820034l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/68050012.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/68050017lfix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/68070023.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/68100004.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/70230027lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/70310021l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/70310027scan.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/70310032lbwb.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/80100003l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/81180016l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/81180019l2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/81180030lfix.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/83720036l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/91180008.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1000033l1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1010033l.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1020022l1HP.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1020026.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1030015_2B2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1030018.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1030027.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1040012fix1.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1040083.JPG',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1040208.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/F1060142.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/FH100009l0lhp2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    },
    {
        src: 'images/portfolio/FH200006_2l1ahp2.jpg',
        alt: 'Portfolio Image',
        caption: 'Portfolio Study'
    }
];

// Track lightbox state
let currentLightboxIndex = 0;

document.addEventListener('DOMContentLoaded', function() {
    const portfolioGrid = document.getElementById('portfolio-grid');
    
    if (portfolioGrid) {
        // Load portfolio images
        loadPortfolioImages();
        
        // Setup lightbox
        initLightbox();
    }
    
    // Set current year in footer
    const currentYearSpan = document.getElementById('current-year');
    if (currentYearSpan) {
        currentYearSpan.textContent = new Date().getFullYear();
    }
});

/**
 * Loads portfolio images into the grid with automatic orientation detection
 */
function loadPortfolioImages() {
    const portfolioGrid = document.getElementById('portfolio-grid');
    
    // Clear any existing items
    portfolioGrid.innerHTML = '';
    
    // Track loaded images for lightbox functionality
    let loadedImages = 0;
    const totalImages = portfolioImages.length;
    
    // Add images to the grid
    portfolioImages.forEach((image, index) => {
        // Create portfolio item container first
        const item = document.createElement('div');
        item.className = 'portfolio-item'; // Base class without orientation yet
        item.dataset.index = index;
        
        // Create image element
        const img = document.createElement('img');
        img.src = image.src;
        img.alt = image.alt;
        
        // Add load event to determine orientation
        img.onload = function() {
            // Determine orientation based on aspect ratio
            const ratio = this.naturalWidth / this.naturalHeight;
            
            if (ratio > 1.2) {
                item.classList.add('horizontal');
            } else if (ratio < 0.8) {
                item.classList.add('vertical');
            } else {
                item.classList.add('square');
            }
            
            // Track when all images are loaded
            loadedImages++;
            if (loadedImages === totalImages) {
                console.log('All images loaded with orientation detection');
            }
        };
        
        // Add error handling
        img.onerror = function() {
            console.error(`Failed to load image: ${image.src}`);
            item.classList.add('vertical'); // Default to vertical on error
            
            // Still track loading
            loadedImages++;
        };
        
        // Create caption element
        const caption = document.createElement('div');
        caption.className = 'caption';
        caption.textContent = image.caption;
        
        // Add click event for lightbox
        item.addEventListener('click', function() {
            openLightbox(index);
        });
        
        // Append elements to item
        item.appendChild(img);
        item.appendChild(caption);
        
        // Add to grid
        portfolioGrid.appendChild(item);
    });
}

/**
 * Initializes the lightbox functionality
 */
function initLightbox() {
    const lightbox = document.getElementById('lightbox');
    const closeBtn = document.querySelector('.close-lightbox');
    const prevBtn = document.querySelector('.lightbox-prev');
    const nextBtn = document.querySelector('.lightbox-next');
    
    // Close lightbox when clicked outside of content
    if (lightbox) {
        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                closeLightbox();
            }
        });
    }
    
    // Close button click
    if (closeBtn) {
        closeBtn.addEventListener('click', closeLightbox);
    }
    
    // Previous button click
    if (prevBtn) {
        prevBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox('prev');
        });
    }
    
    // Next button click
    if (nextBtn) {
        nextBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox('next');
        });
    }
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (!lightbox || !lightbox.classList.contains('active')) return;
        
        if (e.key === 'Escape') {
            closeLightbox();
        } else if (e.key === 'ArrowLeft') {
            navigateLightbox('prev');
        } else if (e.key === 'ArrowRight') {
            navigateLightbox('next');
        }
    });
}

/**
 * Opens the lightbox with the specified image
 */
function openLightbox(index) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxCaption = document.getElementById('lightbox-caption');
    
    if (!lightbox || !lightboxImg || !lightboxCaption) return;
    
    // Set current index
    currentLightboxIndex = index;
    
    // Get image data
    const image = portfolioImages[index];
    
    // Set image and caption
    lightboxImg.src = image.src;
    lightboxImg.alt = image.alt;
    lightboxCaption.textContent = image.caption;
    
    // Show lightbox
    lightbox.classList.add('active');
    
    // Prevent body scrolling
    document.body.style.overflow = 'hidden';
}

/**
 * Closes the lightbox
 */
function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    
    if (!lightbox) return;
    
    // Hide lightbox
    lightbox.classList.remove('active');
    
    // Allow body scrolling
    document.body.style.overflow = '';
}

/**
 * Navigates to the previous or next image in the lightbox
 */
function navigateLightbox(direction) {
    // Calculate new index
    let newIndex;
    
    if (direction === 'prev') {
        newIndex = (currentLightboxIndex - 1 + portfolioImages.length) % portfolioImages.length;
    } else {
        newIndex = (currentLightboxIndex + 1) % portfolioImages.length;
    }
    
    // Open lightbox with new index
    openLightbox(newIndex);
}