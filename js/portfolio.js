// Portfolio images data
const portfolioImages = [
    {
        src: 'images/portfolio/30560009l2f.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/30410027lbwb.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/30190033lExposure.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/10110030.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite'
    },
    {
        src: 'images/portfolio/10090019lbwb.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite'
    },
    {
        src: 'images/portfolio/10080016.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite'
    },
    {
        src: 'images/portfolio/16630027.jpg',
        alt: 'Bekim Trenova and Nina De Raadt',
        caption: 'Bekim Trenova and Nina De Raadt 1'
    },
    {
        src: 'images/portfolio/16660003.jpg',
        alt: 'Bekim Trenova and Nina De Raadt',
        caption: 'Bekim Trenova and Nina De Raadt 2'
    },
    {
        src: 'images/portfolio/16670038.jpg',
        alt: 'Bekim Trenova and Nina De Raadt',
        caption: 'Bekim Trenova and Nina De Raadt 3'
    },
    {
        src: 'images/portfolio/16660004.jpg',
        alt: 'Bekim Trenova and Nina De Raadt',
        caption: 'Bekim Trenova and Nina De Raadt 4'
    },
    {
        src: 'images/portfolio/000019780003lfix.jpg',
        alt: 'Georgia Fowler',
        caption: 'Georgia Fowler'
    },
    {
        src: 'images/portfolio/000019820034lbwb.jpg',
        alt: 'Georgia Fowler',
        caption: 'Georgia Fowler'
    },
    {
        src: 'images/portfolio/000019780027l1.jpg',
        alt: 'Georgia Fowler',
        caption: 'Georgia Fowler'
    },
    {
        src: 'images/portfolio/25520024lbwb2fix.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/25430035lbwNew3.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/25430034l1bwNew1fix.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/21210015.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 1'
    },
    {
        src: 'images/portfolio/01_2BIssue_2B01_2BTransition.jpg',
        alt: 'Transition Issue 01 - Kasia Struss',
        caption: 'Transition Issue 01 - Kasia Struss 2'
    },
    {
        src: 'images/portfolio/20850031l2fix.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 3'
    },
    {
        src: 'images/portfolio/50810020.jpg',
        alt: 'Matt Loewen',
        caption: 'Matt Loewen'
    },
    {
        src: 'images/portfolio/2038_0l.jpg',
        alt: 'Jerreth Ludwig',
        caption: 'Jerreth Ludwig'
    },
    {
        src: 'images/portfolio/016_21l.jpg',
        alt: 'Jerreth Ludwig',
        caption: 'Jerreth Ludwig'
    },
    {
        src: 'images/portfolio/grace_van_dien.jpg',
        alt: 'Grace Van Dien',
        caption: 'Grace Van Dien'
    },
    {
        src: 'images/portfolio/42810013l13.jpg',
        alt: 'Sheila Marquez',
        caption: 'Sheila Marquez 1'
    },
    {
        src: 'images/portfolio/42740021lbw2.jpg',
        alt: 'Sheila Marquez',
        caption: 'Sheila Marquez 2'
    },
    {
        src: 'images/portfolio/42740023l.jpg',
        alt: 'Sheila Marquez',
        caption: 'Sheila Marquez 3'
    },
    {
        src: 'images/portfolio/42140034.jpeg',
        alt: 'Sheila Marquez',
        caption: 'Sheila Marquez 4'
    },
    {
        src: 'images/portfolio/47260028l2.jpg',
        alt: 'Hana Jirickova',
        caption: 'Hana Jirickova'
    },
    {
        src: 'images/portfolio/47420001l.jpg',
        lt: 'Hana Jirickova',
        caption: 'Hana Jirickova'
    },
    {
        src: 'images/portfolio/47370037l.jpg',
        lt: 'Hana Jirickova',
        caption: 'Hana Jirickova'
    },
    {
        src: 'images/portfolio/000092660033lb2fhp1.jpg',
        alt: 'Ciera and Cymone King',
        caption: 'Ciera and Cymone King 1'
    },
    {
        src: 'images/portfolio/000092730031lbw4.jpg',
        alt: 'Ciera and Cymone King',
        caption: 'Ciera and Cymone King 2'
    },
    {
        src: 'images/portfolio/000092700032lb1f1.jpg',
        alt: 'Ciera and Cymone King',
        caption: 'Ciera and Cymone King 3'
    },
    {
        src: 'images/portfolio/000092730027l2.jpg',
        alt: 'Ciera and Cymone King',
        caption: 'Ciera and Cymone King 4'
    },
    {
        src: 'images/portfolio/68050017lfix.jpg',
        alt: 'Charlotte Free',
        caption: 'Charlotte Free 1'
    },
    {
        src: 'images/portfolio/68070023.jpg',
        alt: 'Xiao Wen Ju',
        caption: 'Xiao Wen Ju 2'
    },
    {
        src: 'images/portfolio/01060012l.jpg',
        alt: 'Ashley Smith and Charlie Himmelstein',
        caption: 'Ashley Smith and Charlie Himmelstein 3'
    },
    {
        src: 'images/portfolio/01080027l.jpg',
        alt: 'Ashley Smith and Charlie Himmelstein',
        caption: 'Ashley Smith and Charlie Himmelstein 4'
    },
    {
        src: 'images/portfolio/61770013.jpg',
        alt: 'Hanne Gaby Odiele',
        caption: 'Hanne Gaby Odiele'
    },
    {
        src: 'images/portfolio/36830003l2.jpg',
        alt: 'Hanne Gaby Odiele',
        caption: 'Hanne Gaby Odiele'
    },
    {
        src: 'images/portfolio/61820034l1.jpg',
        alt: 'Hanne Gaby Odiele',
        caption: 'Hanne Gaby Odiele'
    },
        {
        src: 'images/portfolio/24410011lbwifix.jpg',
        alt: 'Ali Michael',
        caption: 'Ali Michael 1'
    },
    {
        src: 'images/portfolio/24540015l6.jpg',
        alt: 'Ali Michael',
        caption: 'Ali Michael 2'
    },
    {
        src: 'images/portfolio/24410008l7.jpg',
        alt: 'Ali Michael',
        caption: 'Ali Michael 3'
    },
    {
        src: 'images/portfolio/24390017lbwb.jpg',
        alt: 'Ali Michael',
        caption: 'Ali Michael 4'
    },
    {
        src: 'images/portfolio/24540001l1.jpg',
        alt: 'Ali Michael',
        caption: 'Ali Michael 5'
    },
    {
        src: 'images/portfolio/10000035.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite'
    },
    {
        src: 'images/portfolio/10090017.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite'
    },
    {
        src: 'images/portfolio/10100023.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite'
    },
    {
        src: 'images/portfolio/20070017l.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 4'
    },
    {
        src: 'images/portfolio/20050013l.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 5'
    },
    {
        src: 'images/portfolio/20060012.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 6'
    },
    {
        src: 'images/portfolio/20070007.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 7'
    },
    {
        src: 'images/portfolio/70310032lbwb.jpg',
        alt: 'Rebecca Longendyke',
        caption: 'Rebecca Longendyke 1'
    },
    {
        src: 'images/portfolio/70230027lbwb.jpg',
        alt: 'Rebecca Longendyke',
        caption: 'Rebecca Longendyke 2'
    },
    {
        src: 'images/portfolio/70310021l1.jpg',
        alt: 'Rebecca Longendyke',
        caption: 'Rebecca Longendyke 3'
    },
    {
        src: 'images/portfolio/70310027scan.jpg',
        alt: 'Rebecca Longendyke',
        caption: 'Rebecca Longendyke 4'
    },
    {
        src: 'images/portfolio/48020013lbwb.jpg',
        alt: 'Kate Li',
        caption: 'Kate Li'
    },
    {
        src: 'images/portfolio/48020005l2a.jpg',
        alt: 'Kate Li',
        caption: 'Kate Li'
    },
    {
        src: 'images/portfolio/04730018alalconbwcBigF.jpg',
        alt: 'Martha Hunt',
        caption: 'Martha Hunt 1'
    },
    {
        src: 'images/portfolio/40960034l1bwbfix.jpg',
        alt: 'Niamh Adkins',
        caption: 'Niamh Adkins'
    },
    {
        src: 'images/portfolio/04730026lf.jpg',
        alt: 'Martha Hunt',
        caption: 'Martha Hunt 2'
    },
    {
        src: 'images/portfolio/03020022lfix2.jpg',
        alt: 'Hyunji Shin',
        caption: 'Hyunji Shin'
    },
    {
        src: 'images/portfolio/03060025.jpg',
        alt: 'Hyunji Shin',
        caption: 'Hyunji Shin'
    },
    {
        src: 'images/portfolio/03000015.jpg',
        alt: 'Hyunji Shin',
        caption: 'Hyunji Shin'
    },
    {
        src: 'images/portfolio/F1040012fix1.jpg',
        alt: 'Lindsey Wixson',
        caption: 'lindsey Wixson 1'
    },
    {
        src: 'images/portfolio/F1010033l.jpg',
        alt: 'Lindsey Wixson',
        caption: 'Lindsey Wixson 2'
    },
    {
        src: 'images/portfolio/60370019l4.jpg',
        alt: 'Lindsey Wixson',
        caption: 'Lindsey Wixson'
    },
    {
        src: 'images/portfolio/F1020022l1HP.jpg',
        alt: 'Lindsey Wixson',
        caption: 'Lindsey Wixson 4'
    },
    {
        src: 'images/portfolio/53020004.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/52970025.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/53010015l0lb.jpg',
        alt: 'Elsa Hosk',
        caption: 'Elsa Hosk'
    },
    {
        src: 'images/portfolio/000012030031ls.jpg',
        alt: 'Chanel - Nozomi Iijima',
        caption: 'Chanel - Nozomi Iijima 1'
    },
    {
        src: 'images/portfolio/000012820003lfix.jpg',
        alt: 'Chanel - Nozomi Iijima',
        caption: 'Chanel - Nozomi Iijima 2'
    },
    {
        src: 'images/portfolio/000012630008l.jpg',
        alt: 'Chanel - Nozomi Iijima',
        caption: 'Chanel - Nozomi Iijima 3'
    },
    {
        src: 'images/portfolio/000012640029l1s.jpg',
        alt: 'Chanel - Nozomi Iijima',
        caption: 'Chanel - Nozomi Iijima 4'
    },
    {
        src: 'images/portfolio/36570032l.jpg',
        alt: 'Nina De Raadt',
        caption: 'Nina De Raadt'
    },
    {
        src: 'images/portfolio/36590018l1.jpg',
        alt: 'Nina De Raadt',
        caption: 'Nina De Raadt'
    },
    {
        src: 'images/portfolio/000019120016l1.jpg',
        alt: 'Carmella Rose',
        caption: 'Carmella Rose'
    },
    {
        src: 'images/portfolio/60410006.JPG',
        alt: 'Lindsey Wixson',
        caption: 'Lindsey Wixson'
    },
    {
        src: 'images/portfolio/F1060142.jpg',
        alt: 'Va Bien Lingerie',
        caption: 'Va Bien Lingerie'
    },
    {
        src: 'images/portfolio/80100003l.jpg',
        alt: 'Lindsey Wixson',
        caption: 'Lindsey Wixson'
    },
    {
        src: 'images/portfolio/F1030015_2B2.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite 1'
    },
    {
        src: 'images/portfolio/F1020026.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite 2'
    },
    {
        src: 'images/portfolio/F1030027.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite 3'
    },
    {
        src: 'images/portfolio/F1030018.jpg',
        alt: 'Giedre Dukauskaite',
        caption: 'Giedre Dukauskaite 4'
    },
    {
        src: 'images/portfolio/000012700033l.jpg',
        alt: 'Chanel - Irene Kim',
        caption: 'Chanel - Irene Kim 1'
    },
    {
        src: 'images/portfolio/000012590007l.jpg',
        alt: 'Chanel - Irene Kim',
        caption: 'Chanel - Irene Kim 2'
    },
    {
        src: 'images/portfolio/000012580027l1.jpg',
        alt: 'Chanel - Irene Kim',
        caption: 'Chanel - Irene Kim 3'
    },
    {
        src: 'images/portfolio/000013180028l.jpg',
        alt: 'Chanel - Irene Kim',
        caption: 'Chanel - Irene Kim 4'
    },
    {
        src: 'images/portfolio/FH100009l0lhp2.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 1'
    },
    {
        src: 'images/portfolio/FH200006_2l1ahp2.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 2'
    },
    {
        src: 'images/portfolio/22360003lc.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss 8'
    },
    {
        src: 'images/portfolio/81180016l.jpg',
        alt: 'Laragh McCann',
        caption: 'Laragh McCann'
    },
    {
        src: 'images/portfolio/81180019l2.jpg',
        alt: 'Laragh McCann',
        caption: 'Laragh McCann'
    },
    {
        src: 'images/portfolio/81180030lfix.jpg',
        alt: 'Laragh McCann',
        caption: 'Laragh McCann'
    },
    {
        src: 'images/portfolio/56740002fixcon.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss'
    },
    {
        src: 'images/portfolio/56740013fix0l2.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss'
    },
    {
        src: 'images/portfolio/56740007.jpg',
        alt: 'Kasia Struss',
        caption: 'Kasia Struss'
    },
];

// Track lightbox state
let currentLightboxIndex = 0;

document.addEventListener('DOMContentLoaded', function() {
    const portfolioGrid = document.getElementById('portfolio-grid');
    
    if (portfolioGrid) {
        // Load portfolio images
        loadPortfolioImages();
        
        // Setup lightbox
        initLightbox();
    }
    
    // Set current year in footer
    const currentYearSpan = document.getElementById('current-year');
    if (currentYearSpan) {
        currentYearSpan.textContent = new Date().getFullYear();
    }

    // Mobile menu toggle
    const mobileMenu = document.getElementById('mobile-menu');
    const nav = document.querySelector('nav');
    
    if (mobileMenu) {
        mobileMenu.addEventListener('click', function() {
            nav.classList.toggle('active');
            mobileMenu.classList.toggle('active');
        });
    }
});

/**
 * Loads portfolio images into the grid with automatic orientation detection
 */
function loadPortfolioImages() {
    const portfolioGrid = document.getElementById('portfolio-grid');
    
    // Clear any existing items
    portfolioGrid.innerHTML = '';
    
    // Track loaded images for lightbox functionality
    let loadedImages = 0;
    const totalImages = portfolioImages.length;
    
    // Add images to the grid
    portfolioImages.forEach((image, index) => {
        // Create portfolio item container first
        const item = document.createElement('div');
        item.className = 'portfolio-item'; // Base class without orientation yet
        item.dataset.index = index;
        
        // Create image element
        const img = document.createElement('img');
        img.src = image.src;
        img.alt = image.alt;
        
        // Add load event to determine orientation
        img.onload = function() {
            // Determine orientation based on aspect ratio
            const ratio = this.naturalWidth / this.naturalHeight;
            
            if (ratio > 1.2) {
                item.classList.add('horizontal');
            } else if (ratio < 0.8) {
                item.classList.add('vertical');
            } else {
                item.classList.add('square');
            }
            
            // Track when all images are loaded
            loadedImages++;
            if (loadedImages === totalImages) {
                console.log('All images loaded with orientation detection');
            }
        };
        
        // Add error handling
        img.onerror = function() {
            console.error(`Failed to load image: ${image.src}`);
            item.classList.add('vertical'); // Default to vertical on error
            
            // Still track loading
            loadedImages++;
        };
        
        // Create caption element
        const caption = document.createElement('div');
        caption.className = 'caption';
        caption.textContent = image.caption;
        // COMMENT OUT BOTTOM TWO WHEN DONE WITH CAPTIONS
        
        // Add click event for lightbox
        item.addEventListener('click', function() {
            openLightbox(index);
        });
        
        // Append elements to item
        item.appendChild(img);
        item.appendChild(caption);
        
        // Add to grid
        portfolioGrid.appendChild(item);
    });
}

/**
 * Initializes the lightbox functionality
 */
function initLightbox() {
    const lightbox = document.getElementById('lightbox');
    const closeBtn = document.querySelector('.close-lightbox');
    const prevBtn = document.querySelector('.lightbox-prev');
    const nextBtn = document.querySelector('.lightbox-next');
    
    // Close lightbox when clicked outside of content
    if (lightbox) {
        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                closeLightbox();
            }
        });
    }
    
    // Close button click
    if (closeBtn) {
        closeBtn.addEventListener('click', closeLightbox);
    }
    
    // Previous button click
    if (prevBtn) {
        prevBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox('prev');
        });
    }
    
    // Next button click
    if (nextBtn) {
        nextBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox('next');
        });
    }
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (!lightbox || !lightbox.classList.contains('active')) return;
        
        if (e.key === 'Escape') {
            closeLightbox();
        } else if (e.key === 'ArrowLeft') {
            navigateLightbox('prev');
        } else if (e.key === 'ArrowRight') {
            navigateLightbox('next');
        }
    });
}

/**
 * Opens the lightbox with the specified image
 */
function openLightbox(index) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const lightboxCaption = document.getElementById('lightbox-caption');
    
    if (!lightbox || !lightboxImg || !lightboxCaption) return;
    
    // Set current index
    currentLightboxIndex = index;
    
    // Get image data
    const image = portfolioImages[index];
    
    // Set image and caption
    lightboxImg.src = image.src;
    lightboxImg.alt = image.alt;
    lightboxCaption.textContent = image.caption;
    
    // Show lightbox
    lightbox.classList.add('active');
    
    // Prevent body scrolling
    document.body.style.overflow = 'hidden';
}

/**
 * Closes the lightbox
 */
function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    
    if (!lightbox) return;
    
    // Hide lightbox
    lightbox.classList.remove('active');
    
    // Allow body scrolling
    document.body.style.overflow = '';
}

/**
 * Navigates to the previous or next image in the lightbox
 */
function navigateLightbox(direction) {
    // Calculate new index
    let newIndex;
    
    if (direction === 'prev') {
        newIndex = (currentLightboxIndex - 1 + portfolioImages.length) % portfolioImages.length;
    } else {
        newIndex = (currentLightboxIndex + 1) % portfolioImages.length;
    }
    
    // Open lightbox with new index
    openLightbox(newIndex);
}